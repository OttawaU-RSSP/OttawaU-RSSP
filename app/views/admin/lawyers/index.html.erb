<% content_for :javascript do %>
  <script>
    $(function() {
      new OttawaURSSP.SortableTable('#lawyer-table');
    });
  </script>
<% end %>

<%= render partial: "admin/nav_bar", locals: { active: 'lawyers' } %>

<h1>Lawyers</h1>
<div class="table-responsive">
  <table id="lawyer-table" class="table table-bordered tablesorter">
    <thead>
      <tr>
        <th>Name</th>
        <th>City</th>
        <th>Province</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Language</th>
        <th>Status</th>
        <th>Sponsor Groups</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% @lawyers.each do |lawyer| %>
        <tr>
          <th scope="row"><%= link_to lawyer.name, admin_lawyer_path(lawyer) %></th>
          <td><%= lawyer.city %></td>
          <td><%= lawyer.province %></td>
          <td><%= lawyer.email %></td>
          <td><%= lawyer.telephone %></td>
          <td><%= lawyer.language_of_practice %></td>
          <td><%= lawyer.approved? ? "Approved" : "Pending Approval" %></td>
          <td><%= lawyer.applications.count %></td>
          <td><%= link_to "Delete", admin_lawyer_path(lawyer), method: :delete, data:
              { confirm: "Are you sure you want to delete this lawyer? Their information will be permanently deleted." }, class: 'btn btn-danger' %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<% content_for :javascript do %>
  <script>
    $(function() {
      new OttawaURSSP.SortableTable('#student-table');
    });
  </script>
<% end %>

<%= render partial: "admin/nav_bar", locals: { active: 'students' } %>
<div class="table-responsive">
  <table id='student-table' class="table table-bordered tablesorter">
    <thead>
      <tr>
        <th>Name <i class="fa fa-sort"></i></th>
        <th>City <i class="fa fa-sort"></i></th>
        <th>Province <i class="fa fa-sort"></i></th>
        <th>Email <i class="fa fa-sort"></i></th>
        <th>Phone <i class="fa fa-sort"></i></th>
        <th>Language <i class="fa fa-sort"></i></th>
        <th>Status <i class="fa fa-sort"></i></th>
        <th>Sponsor Groups <i class="fa fa-sort"></i></th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% @students.each do |student| %>
        <tr>
          <th scope="row"><%= link_to student.name, admin_student_path(student) %>
          <td><%= student.city %></td>
          <td><%= student.province %></td>
          <td><%= student.email %></td>
          <td><%= student.telephone %></td>
          <td><%= student.language %></td>
          <td><%= student.approved? ? "Approved" : "Pending Approval" %></td>
          <td><%= student.applications.count %></td>
          <td><%= link_to "Delete", admin_student_path(student), method: :delete, data:
              { confirm: "Are you sure you want to delete this student? Their information will be permanently deleted." }, class: 'btn btn-danger' %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
